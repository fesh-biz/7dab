(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"01a2":function(t,e,s){"use strict";s("247c")},"09ad":function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));s("e6cf");class i{constructor(){if(i.instance)return i.instance;i.instance=this}isScrollBottom(t){const e=document.documentElement.offsetHeight,s=window.innerHeight,i=window.scrollY||window.pageYOffset||document.body.scrollTop+(document.documentElement&&document.documentElement.scrollTop||0);return e<=s+i+(t||0)}whenScrollFinished(){let t=0,e=window.scrollX,s=window.scrollY;return new Promise((i=>{function a(n){n>=500||n-t>20?i():(window.scrollX===e&&window.scrollY===s||(t=n,e=window.scrollX,s=window.scrollY),requestAnimationFrame(a.bind(null,n+1)))}a(0)}))}}},1877:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-avatar",{attrs:{size:t.size}},[t.src?s("img",{attrs:{src:t.src}}):t._e(),t.src?t._e():s("q-icon",{attrs:{size:t.size,color:"grey",name:"account_circle"}})],1)},a=[],n={name:"UserAvatar",props:{size:{type:String,default:"72px"},src:{type:String,default:null}},data(){return{}}},o=n,r=s("2877"),l=s("cb32"),c=s("0016"),d=s("eebe"),u=s.n(d),p=Object(r["a"])(o,i,a,!1,null,null,null);e["a"]=p.exports;u()(p,"components",{QAvatar:l["a"],QIcon:c["a"]})},"1da2":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-chip",{staticStyle:{"padding-left":"25px"},attrs:{color:t.bgColor,size:"1rem"}},[s("q-avatar",[s("q-icon",{attrs:{color:t.iconColor,name:t.icon,size:"1.5rem"}},[t.tooltip?s("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"scale","transition-hide":"scale"}},[s("span",{staticStyle:{"font-size":"0.8rem"}},[t._v(t._s(t.tooltip))])]):t._e()],1)],1),s("span",{staticStyle:{"font-size":"0.9rem"}},[t._v(t._s(t.label))]),t._t("default")],2)},a=[],n={name:"ChipInfo",props:{icon:{type:String,required:!0},label:{type:[String,Number],required:!0},tooltip:{type:String,default:null},bgColor:{type:String,default:"light-blue-1"},iconColor:{type:String,default:"grey-7"}},data(){return{}}},o=n,r=s("2877"),l=s("b047"),c=s("cb32"),d=s("0016"),u=s("05c0"),p=s("eebe"),h=s.n(p),m=Object(r["a"])(o,i,a,!1,null,null,null);e["a"]=m.exports;h()(m,"components",{QChip:l["a"],QAvatar:c["a"],QIcon:d["a"],QTooltip:u["a"]})},"247c":function(t,e,s){},"30b7":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"no-top":t.noTop}},[s("q-table",{attrs:{flat:"",title:t.title,data:t.data,columns:t.columns,loading:t.loading,"rows-per-page-label":t.rowsPerPage,"rows-per-page-options":[0],pagination:t.pagination,"row-key":t.rowKey,filter:t.filter},on:{"update:pagination":function(e){t.pagination=e},request:t.onRequest},scopedSlots:t._u([{key:"top-right",fn:function(){return[s("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},t.useBody?{key:"body",fn:function(e){return[t._t("table",null,{props:e})]}}:null],null,!0)})],1)},a=[],n=s("77fc"),o={name:"Datable",props:{noTop:{type:Boolean,default:!1},columns:{type:Array,required:!0},url:{type:String,required:!0},rowKey:{type:String,required:!0},title:{type:String,default:""},useBody:{type:Boolean,default:!1}},data(){return{api:new n["a"],filter:"",data:[],rowsPerPage:"0",loading:!1,pagination:{sortBy:"",descending:!1,page:1,rowsPerPage:0,rowsNumber:0}}},watch:{url(t){this.fetchItems()}},created(){this.fetchItems()},methods:{onRequest(t){this.fetchItems(Object.assign(t.pagination,{keyword:this.filter}))},fetchItems(t){this.loading=!0,this.data=[],this.api.get(this.url,t,null,!0).then((t=>{var e,s,i,a;this.loading=!1,this.rowsPerPage=""+t.data.per_page,this.data=t.data.data,this.pagination={sortBy:null===t||void 0===t||null===(e=t.config)||void 0===e||null===(s=e.params)||void 0===s?void 0:s.sortBy,descending:null===t||void 0===t||null===(i=t.config)||void 0===i||null===(a=i.params)||void 0===a?void 0:a.descending,page:t.data.current_page,rowsPerPage:t.data.per_page,rowsNumber:t.data.total}})).catch((()=>{this.loading=!1}))}}},r=o,l=(s("30d1"),s("2877")),c=s("eaac"),d=s("27f9"),u=s("0016"),p=s("eebe"),h=s.n(p),m=Object(l["a"])(r,i,a,!1,null,null,null);e["a"]=m.exports;h()(m,"components",{QTable:c["a"],QInput:d["a"],QIcon:u["a"]})},"30d1":function(t,e,s){"use strict";s("e73e")},4678:function(t,e,s){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){var e=n(t);return s(e)}function n(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=n,t.exports=a,a.id="4678"},4746:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isFetchingPosts?s("q-linear-progress",{class:{"q-mt-md":!t.$q.platform.is.mobile},attrs:{indeterminate:""}}):t._e(),t._l(t.posts,(function(t,e){return s("post",{key:"post"+e,attrs:{post:t}})})),t.isLast?s("q-banner",{staticClass:"text-center",attrs:{dusk:"main-no-more-posts",rounded:""}},[t._v("\n    "+t._s(t.$t("there_is_no_new_posts"))+"\n  ")]):t._e(),t.isFetchingPosts&&t.posts.length?s("q-linear-progress",{staticClass:"q-mb-xl",attrs:{dusk:"main-new-posts-loading",indeterminate:""}}):t._e()],2)},a=[],n=(s("e6cf"),s("5e86")),o=s("f9a5"),r=s("77fc"),l=s("09ad"),c=s("26d8"),d={name:"PostFeed",props:{params:{type:Object,default:()=>{}},url:{type:String,required:!0}},components:{Post:o["a"]},data(){return{isFetchingPosts:!0,cache:new c["a"],api:new r["a"],scroll:new l["a"],isPrevRequestSuccess:!0,posts:[],isLast:!1}},async created(){this.cache.hasCacheForCurrentPage("posts")?(this.posts=this.getPosts(),this.isFetchingPosts=!1):await this.fetchPosts()},mounted(){window.addEventListener("scroll",this.maybeFetchNextPosts)},methods:{scrollToPost(t){const e=document.getElementById(t);e?setTimeout((()=>{e.scrollIntoView({behavior:"smooth"})}),100):setTimeout((()=>{this.scrollToPost(t)}),100)},async maybeFetchNextPosts(){const t=await this.cache.getPagination("posts");this.isLast=t.is_last,this.isFetchingPosts||!this.scroll.isScrollBottom(500)||this.isLast||await this.fetchPosts()},getPosts(){const t=this.cache.getCurrentPageCacheIds("posts");return n["a"].query().withAll().whereIdIn(t).orderBy("id","desc").all()},async fetchPosts(){if(!this.isPrevRequestSuccess)return;this.isFetchingPosts=!0,this.isPrevRequestSuccess=!1;const t=await this.cache.getPagination("posts"),e=Object.assign({page:t.page},this.params);this.api.get(this.url,e,"posts").then((async t=>{await n["a"].insert({data:t.data.data}),this.posts=this.getPosts();const e=await this.cache.getPagination("posts");this.isLast=e.is_last,this.isFetchingPosts=!1,this.isPrevRequestSuccess=!0})).catch((()=>{this.isFetchingPosts=!1}))}},beforeDestroy(){window.removeEventListener("scroll",this.maybeFetchNextPosts)}},u=d,p=s("2877"),h=s("6b1d"),m=s("54e1"),f=s("eebe"),g=s.n(f),b=Object(p["a"])(u,i,a,!1,null,null,null);e["a"]=b.exports;g()(b,"components",{QLinearProgress:h["a"],QBanner:m["a"]})},"4e60":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-select",{attrs:{dense:"",outlined:"",options:t.users,"option-value":"id","option-label":"login",label:"Обрати користувача"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})},a=[],n=(s("e6cf"),s("77fc")),o={name:"SelectFakeUser",data(){return{api:new n["a"],users:[],model:null}},watch:{model(t){this.$emit("input",t.id)}},async created(){const t=await this.api.get("admin/users/fake-users",null,null,!0);this.users=[{id:0,login:"non"}].concat(t.data);const e=Math.floor(Math.random()*t.data.length);this.model=t.data[e]}},r=o,l=s("2877"),c=s("ddd8"),d=s("eebe"),u=s.n(d),p=Object(l["a"])(r,i,a,!1,null,null,null);e["a"]=p.exports;u()(p,"components",{QSelect:c["a"]})},"4f9d":function(t,e,s){"use strict";s.d(e,"a",(function(){return d}));s("e6cf");var i=s("6357"),a=s("7cbd"),n=s("2ef0"),o=s.n(n),r=s("5e86"),l=s("2a19");const c={title:"",sections:[],tags:[]};class d{constructor(){if(d.instance)return d.instance;this.formModel=o.a.cloneDeep(c),this.fake_user_id=null,this.api=new a["a"],this.totalImages=0,this.totalImagesMax=10,this.validator=new i["a"](c),d.instance=this}addSection(t,e,s){const i=this.formModel.sections.length?this.formModel.sections[this.formModel.sections.length-1].order+1:1;e=e||null,"youtube"!==t||e||(e={youtube_id:null,title:null}),this.formModel.sections.push({id:s,order:i,type:t,content:e}),"image"===t&&this.totalImages++}addSections(t,e,s){s.forEach((e=>{e instanceof File&&this.addSection(t,{file:e})}))}deleteSection(t){const e=this.formModel.sections[t];"image"===(null===e||void 0===e?void 0:e.type)&&(this.totalImages--,this.totalImages<0&&(this.totalImages=0)),this.formModel.sections.splice(t,1),this.validator.resetFieldError("sections",e.order)}fillFormModel(t){this.totalImages=0,this.formModel=o.a.cloneDeep(c);const e=r["a"].query().withAll().find(t);this.formModel.title=e.title;const s=t=>{const e={text:t=>{this.addSection("text",t.body,t.id)},image:t=>{this.addSection("image",{url:t.original_file_path,title:t.title},t.id)},youtube:t=>{this.addSection("youtube",{youtube_id:t.youtube_id},t.id)}},s=t.type;if(!e[s])throw new Error("Section with given type "+s+" doesn't exists");e[s](t)};e.content.forEach((t=>{s(t)}));const i=[];e.tags.forEach((t=>{i.push({label:t.title,value:t.id})})),this.formModel.tags=i}updateSection(t,e){const s=o.a.find(this.formModel.sections,{order:t});"image"===s.type?"image"===s.type&&(s.content=s.content||{file:null,url:null,title:null},s.content=Object.assign(s.content,e)):s.content=e}resetFormModel(){this.formModel=o.a.cloneDeep(c),this.totalImages=0}getSectionsWithCorrectOrders(t){t=o.a.sortBy(this.formModel.sections,"order");let e=1;return t=t.map((t=>(t.order=e,e++,t))),t}getFormData(){this.formModel.sections=this.getSectionsWithCorrectOrders(this.formModel.sections);const t=this.formModel,e=new FormData;e.append("title",t.title),this.fake_user_id&&e.append("fake_user_id",this.fake_user_id);for(let s=0;s<t.sections.length;s++){const i=t.sections[s];if(i.id&&e.append(`sections[${s}][id]`,i.id),e.append(`sections[${s}][type]`,i.type),e.append(`sections[${s}][order]`,i.order),"image"===i.type){if(!i.content)continue;i.content.file&&e.append(`sections[${s}][content][file]`,i.content.file),e.append(`sections[${s}][content][url]`,i.content.url||""),e.append(`sections[${s}][content][title]`,i.content.title||"")}"text"===i.type&&e.append(`sections[${s}][content]`,i.content||""),"youtube"===i.type&&e.append(`sections[${s}][content][youtube_id]`,i.content.youtube_id)}for(let s=0;s<t.tags.length;s++){const i=t.tags[s];i.value?e.append(`tags[${s}][id]`,i.value):e.append(`tags[${s}][new]`,i)}return e}clearAllEmptyFields(){this.formModel.sections=this.formModel.sections.filter((t=>"youtube"===t.type?!!t.content.youtube_id:!!t.content))}saveOrUpdate(t){return new Promise(((e,s)=>{if(this.clearAllEmptyFields(),!this.formModel.sections.length)return l["a"].create({position:"center",color:"negative",message:"Теревенька має мати хоча б одне заповнене поле"}),s();const i=this.getFormData(),a=t?"update":"store";this.api[a](i,t).then((t=>e(t))).catch((t=>{this.validator.setErrors(t),s(t)}))}))}}},"51d9":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-icon",{staticClass:"cursor-pointer",class:{"iwt-disabled":this.disabled},attrs:{name:t.icon,color:t.color,size:t.size},on:{click:t.click}},[s("q-tooltip",{attrs:{"transition-show":"scale","transition-hide":"scale",self:"bottom middle",anchor:"top middle"}},[t._v("\n    "+t._s(t.tooltip)+"\n  ")])],1)},a=[],n={name:"IconWithTooltip",props:{icon:{type:String,required:!0},tooltip:{type:String,required:!0},color:{type:String,default:""},size:{type:String,default:"md"},disabled:{type:Boolean,default:!1}},data(){return{}},methods:{click(){this.disabled||this.$emit("click")}}},o=n,r=(s("8643"),s("2877")),l=s("0016"),c=s("05c0"),d=s("eebe"),u=s.n(d),p=Object(r["a"])(o,i,a,!1,null,null,null);e["a"]=p.exports;u()(p,"components",{QIcon:l["a"],QTooltip:c["a"]})},5440:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"wrapper",staticClass:"flex justify-center",class:{error:t.errorMessage}},[t.isImageAdded||t.content&&t.content.url?s("div",{staticStyle:{width:"100%"}},[s("icon-with-tooltip",{staticClass:"cursor-pointer",attrs:{size:"2rem",icon:"change_circle",tooltip:t.$t("change_image")},on:{click:t.addImages}})],1):t._e(),t.isImageAdded?t._e():s("q-icon",{staticClass:"cursor-pointer",staticStyle:{"background-color":"white"},attrs:{size:"10rem",color:"blue-grey-2",name:"add_a_photo"},on:{click:t.addImages}}),s("canvas",{ref:"canvas",attrs:{width:this.wrapperWidth,height:"0"}}),s("q-input",{staticStyle:{width:"100%"},attrs:{dense:"",label:t.$t("add_image_label"),"stack-label":""},on:{input:t.input},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t.errorMessage?s("span",{staticStyle:{color:"red",width:"100%"}},[t._v(t._s(t.errorMessage))]):t._e()],1)},a=[],n=(s("e6cf"),s("51d9")),o=s("4f9d"),r={name:"ImageField",components:{IconWithTooltip:n["a"]},props:{content:{type:Object,default:null},order:{type:Number,required:!0},errorMessage:{type:[String]}},data(){return{wrapperWidth:0,isImageAdded:!1,postEditor:new o["a"]}},computed:{title:{get(){var t;return(null===(t=this.content)||void 0===t?void 0:t.title)||""},set(t){this.postEditor.updateSection(this.order,{title:t})}}},async mounted(){this.wrapperWidth=this.$refs.wrapper.offsetWidth,this.content?this.content.file?this.drawImage(this.content.file):this.content.url&&this.drawImageFromUrl(this.content.url):this.addImages()},methods:{input(){this.$emit("input")},addImages(){this.$emit("input");const t=document.createElement("input");t.type="file",t.multiple=!0,t.onchange=t=>{this.handleImages(t.target.files)},t.click()},drawImage(t){const e=this.$refs.canvas,s=e.getContext("2d"),i=new FileReader;i.onload=t=>{const i=new Image;i.onload=()=>{let t=i.width,a=i.height;t>this.wrapperWidth&&(a*=this.wrapperWidth/t,t=this.wrapperWidth),e.width=t,e.height=a,s.drawImage(i,0,0,i.width,i.height,0,0,t,a),this.isImageAdded=!0},i.src=t.target.result},i.readAsDataURL(t)},async drawImageFromUrl(t){const e=await fetch(t),s=await e.blob(),i={type:"image/jpeg"};let a=t;a=a.substr(a.lastIndexOf("/")+1);const n=new File([s],a,i);this.drawImage(n)},handleImages(t){const e=this.validateImages(t);if(e)return void this.$q.notify({message:e,position:"center",color:"negative"});const s=t[0];this.drawImage(s),this.postEditor.updateSection(this.order,{file:s});const i=[];for(let a=0;a<t.length;a++)a>0&&i.push(t[a]);this.postEditor.addSections("image",this.order,i)},validateImages(t){let e=null;const s=/(jpg)|(png)|(jpeg)/i;for(let i=0;i<t.length;i++){s.test(t[i].type)||(e=this.$t("wrong_image_file_allowed_types")+": jpg, jpeg, png");const a=5e3;if(t[i].size>1024*a&&(e=this.$t("max_allowed_filesize")+" "+a+"Kb"),e)break}return e}}},l=r,c=s("2877"),d=s("0016"),u=s("27f9"),p=s("eebe"),h=s.n(p),m=Object(c["a"])(l,i,a,!1,null,null,null);e["a"]=m.exports;h()(m,"components",{QIcon:d["a"],QInput:u["a"]})},"5899c":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"field"},[s("q-input",{staticClass:"q-mb-md",attrs:{dense:"",outlined:"",label:t.$t("insert_youtube_link")},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}),t.videoId?s("you-tube",{ref:"youtube",attrs:{"video-id":t.videoId}}):t._e()],1)},a=[];s("5319");class n{constructor(){if(n.instance)return n.instance;n.instance=this}getUrlQueryVars(t){const e={};return t.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,s,i){e[s]=i})),e}}var o=s("f724"),r={name:"YouTubeField",components:{YouTube:o["a"]},props:{value:{type:Object,required:!0}},data(){return{url:new n,videoId:null,model:null}},watch:{model(t){this.onInput(t)}},created(){this.value.youtube_id&&(this.videoId=this.value.youtube_id,this.model="https://www.youtube.com/watch?v="+this.value.youtube_id)},methods:{getYouTubeId(t){let e=null;if(t.includes("youtu.be")&&(e=t.split("/").pop()),t.includes("v=")){const s=/[?&]v=([^&#]+)/,i=s.exec(t),a=i&&decodeURIComponent(i[1].replace(/\+/g," "));e=a||null}return t.includes("shorts")&&(e=t.split("/").pop(),e.includes("?")&&(e=e.split("?")[0])),e},onInput(){this.videoId=null,this.isFetching=!0;const t=this.getYouTubeId(this.model);this.isFetching=!1,this.videoId=t,this.$emit("input",{youtube_id:this.videoId}),setTimeout((()=>{this.$refs.youtube.updateSrc(this.videoId)}),10)}}},l=r,c=s("2877"),d=s("27f9"),u=s("eebe"),p=s.n(u),h=Object(c["a"])(l,i,a,!1,null,null,null);e["a"]=h.exports;p()(h,"components",{QInput:d["a"]})},"5fb2c":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-item",{staticClass:"author-item",attrs:{dense:"",clickable:"",to:{name:"user",params:{id:t.user.id}}}},[s("q-item-section",[s("q-chip",{attrs:{color:t.bgColor,size:"0.8rem"}},[s("q-avatar",[t.avatar?s("img",{attrs:{src:t.avatar}}):t._e(),t.avatar?t._e():s("q-icon",{staticStyle:{"margin-top":"-3px"},attrs:{color:t.isPostAuthor?"white":"grey-8",name:"account_circle",size:"2.3rem"}})],1),s("strong",{style:{color:t.isPostAuthor?"white":"#363636"}},[t._v(t._s(t.name))])],1)],1)],1)},a=[],n={name:"Author",props:{isPostAuthor:{type:Boolean,default:!0},avatar:{type:String,default:null},name:{type:String,required:!0},user:{type:Object,required:!0}},data(){return{}},computed:{bgColor(){return this.isPostAuthor?"green-7":"light-blue-1"}}},o=n,r=(s("9e13"),s("2877")),l=s("66e5"),c=s("4074"),d=s("b047"),u=s("cb32"),p=s("0016"),h=s("eebe"),m=s.n(h),f=Object(r["a"])(o,i,a,!1,null,null,null);e["a"]=f.exports;m()(f,"components",{QItem:l["a"],QItemSection:c["a"],QChip:d["a"],QAvatar:u["a"],QIcon:p["a"]})},6357:function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));var i=s("8847");class a{constructor(t){this.formModel=t,this.errors={error_message:null},this.mainErrorMessage=null,this.formModel&&this.resetErrors()}setError(t,e){this.errors[t]=e[t]?e[t][0]:null}setErrors(t){var e,s,a,n;"The given data was invalid."!==(null===t||void 0===t||null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)&&(this.mainErrorMessage=null===t||void 0===t||null===(a=t.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message);const o=t.response.data.errors;if(o){for(const i in o)if(o.hasOwnProperty(i)){if("error_message"===i){this.errors.error_message=o[i];continue}this.errors[i]=o[i][0]||o[i]}}else{const e={invalid_grant:i["b"].messages[i["b"].locale].wrong_credentials,invalid_request:i["b"].messages[i["b"].locale].check_your_data},s=t.response.data.error;this.errors.error_message=e[s]||null}}resetFieldError(t,e){this.errors[t]&&(e?"string"===typeof this.errors[t]?this.errors[t]=null:this.errors[t][e]=null:this.errors[t]=null),this.errors.error_message=null,this.mainErrorMessage=null}resetErrors(){for(const t in this.formModel)this.formModel.hasOwnProperty(t)&&(this.errors[t]=null);this.errors.error_message=null,this.mainErrorMessage=null}}},"650e":function(t,e,s){},"7cbd":function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));s("e6cf");var i=s("77fc");class a{constructor(){if(a.instance)return a.instance;this.api=new i["a"],a.instance=this}incrementPostViewsCounter(t){return new Promise(((e,s)=>{this.api.post(`posts/increment-views/${t}`).then((t=>e(t))).catch((t=>s(t)))}))}fetchPostView(t){return new Promise(((e,s)=>{this.api.get(`posts/${t}`,null,"posts").then((t=>{e(t)})).catch((t=>{s(t)}))}))}fetchPostPreview(t){return new Promise(((e,s)=>{this.api.get(`posts/${t}/preview`,null,"posts").then((t=>{e(t)})).catch((t=>{s(t)}))}))}store(t){return new Promise(((e,s)=>{this.api.post("posts",t,{headers:{"Content-Type":"multipart/form-data"}},"posts").then((t=>e(t))).catch((t=>{s(t)}))}))}update(t,e){return new Promise(((s,i)=>{this.api.post(`/posts/${e}`,t,{headers:{"Content-Type":"multipartddd/form-data"}},"posts").then((t=>s(t))).catch((t=>{i(t)}))}))}publish(t){return new Promise(((e,s)=>{this.api.post(`posts/${t}/publish`,null,null,null,!0).then((t=>e(t))).catch((t=>{s(t)}))}))}delete(t){return new Promise(((e,s)=>{this.api.post(`posts/${t}/delete`,null,null,null,!0).then((t=>e(t))).catch((t=>{s(t)}))}))}}},8402:function(t,e,s){},8643:function(t,e,s){"use strict";s("e600")},"89d6":function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));s("e6cf");var i=s("77fc");class a{constructor(){if(a.instance)return a.instance;this.api=new i["a"],a.instance=this}fetchByIds(t){let e="";return t.forEach(((s,i)=>{e+=`tids[]=${s}`,i+1<t.length&&(e+="&")})),new Promise(((t,s)=>{this.api.get(`/tags/search?${e}`,null,"tags").then((e=>t(e))).catch((t=>s(t)))}))}search(t,e=5){return new Promise(((s,i)=>{this.api.get(`/tags/search?title=${t}&limit=${e}`,null,"tags").then((t=>s(t))).catch((t=>i(t)))}))}update(t,e){return new Promise(((s,i)=>{this.api.put(`admin/tags/${t}`,e,null,null,!0).then((t=>s(t))).catch((t=>i(t)))}))}}},"9e13":function(t,e,s){"use strict";s("650e")},a010:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{error:t.errorMessage}},[s("q-select",{ref:"tagField",attrs:{label:t.$t("tags"),options:t.options,"use-input":"","use-chips":"",multiple:"","option-disable":"inactive","hide-dropdown-icon":"",outlined:"","input-debounce":"300","new-value-mode":"add-unique"},on:{input:function(e){return t.$emit("input",t.model)},filter:t.filterFn,"input-value":function(e){return t.inputValue=e}},nativeOn:{keydown:function(e){return t.onKeyDown(e)}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}),t.errorMessage?s("span",{staticStyle:{color:"red"}},[t._v(t._s(t.errorMessage))]):t._e()],1)},a=[],n=s("89d6"),o=s("4f9d"),r={name:"TagField",props:{errorMessage:{type:String,default:null},tags:{type:Array,default:null}},data(){return{options:[],tagApi:new n["a"],postEditor:new o["a"],fetching:!1,inputValue:null,isFiltering:!1,commaTimeout:null}},computed:{model:{get(){return this.postEditor.formModel.tags},set(t){this.postEditor.formModel.tags=t}}},methods:{onKeyDown(t){(","===t.key||","===t.key&&t.shiftKey)&&(t.preventDefault(),this.$refs.tagField.add(this.inputValue),this.$refs.tagField.updateInputValue(""))},filterFn(t,e){if(""===t)return void e((()=>{}));const s=t.toLowerCase();this.options=[],this.isFiltering=!0,this.tagApi.search(s).then((t=>{const s=t.data,i=[];s.forEach((t=>{i.push({label:t.title,value:t.id,inactive:"rejected"===t.status})})),this.isFiltering=!1,e((()=>{this.options=i}))}))}}},l=r,c=s("2877"),d=s("ddd8"),u=s("eebe"),p=s.n(u),h=Object(c["a"])(l,i,a,!1,null,null,null);e["a"]=h.exports;p()(h,"components",{QSelect:d["a"]})},a31e:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"scale","transition-hide":"scale"}},[t._v("\n    "+t._s(t.tooltip)+"\n  ")]),s("q-icon",{staticClass:"q-mr-xs",attrs:{size:t.iconSize,name:t.iconName},on:{click:function(e){return t.$emit("click")}}})],1)},a=[],n={name:"TooltipIcon",props:{tooltip:{type:String,required:!0},iconName:{type:String,required:!0},iconSize:{type:String,default:"sm"}},data(){return{}}},o=n,r=s("2877"),l=s("05c0"),c=s("0016"),d=s("eebe"),u=s.n(d),p=Object(r["a"])(o,i,a,!1,null,null,null);e["a"]=p.exports;u()(p,"components",{QTooltip:l["a"],QIcon:c["a"]})},ad45:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-select",{attrs:{dence:"",outlined:"",options:t.statuses},on:{input:t.onChange},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})},a=[],n=s("2ef0"),o=s.n(n);const r=[{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Rejected",value:"rejected"}];var l={name:"Status",props:{item:{type:Object,required:!0},statuses:{type:Array,default:()=>r}},data(){return{model:null}},created(){this.model=o.a.find(this.statuses,{value:this.item.status})},methods:{onChange(){this.$emit("update",Object.assign(this.item,{status:this.model.value}))}}},c=l,d=s("2877"),u=s("ddd8"),p=s("eebe"),h=s.n(p),m=Object(d["a"])(c,i,a,!1,null,null,null);e["a"]=m.exports;h()(m,"components",{QSelect:u["a"]})},d171:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-mr-sm",attrs:{dusk:t.ratingableType+"-"+t.ratingable.id+"-rating"}},[t.isSubmitting?s("q-linear-progress",{staticStyle:{"margin-top":"-4px"},attrs:{indeterminate:""}}):t._e(),s("q-btn",{attrs:{round:"",size:"0.6rem",color:t.isMyVotePositive?"green-8":"grey-6",icon:"thumb_up"},on:{click:function(e){return t.vote("up")}}},[s("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10]}},[s("span",{staticStyle:{"font-size":"0.8rem"}},[t._v(t._s(t.$t("to_vote_positive")))])])],1),s("q-chip",{attrs:{color:t.rating.color,"text-color":0===t.rating.result?"black":"white"}},[t._v("\n    "+t._s(t.rating.result)+"\n    "),s("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10]}},[t._v("\n      "+t._s(t.rating.positiveVotes)+" - "+t._s(t.rating.negativeVotes)+"\n    ")])],1),s("q-btn",{attrs:{round:"",color:!1===t.isMyVotePositive?"red-8":"grey-6",size:"0.6rem",icon:"thumb_down"},on:{click:function(e){return t.vote("down")}}},[s("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10]}},[s("span",{staticStyle:{"font-size":"0.8rem"}},[t._v(t._s(t.$t("to_vote_negative")))])])],1)],1)},a=[],n=(s("e6cf"),s("77fc"));class o{constructor(){if(o.instance)return o.instance;this.api=new n["a"],o.instance=this}vote(t,e,s){return new Promise(((i,a)=>{this.api.post("/ratings/vote",{id:e,type:t,is_upvote:s},null,"my_votes").then((t=>i(t))).catch((t=>a(t)))}))}}var r=s("e93d"),l=s("a256"),c=s("b65d"),d=s("891a"),u={name:"Rating",props:{ratingable:{type:Object,required:!0},ratingableType:{type:String,required:!0}},data(){return{isSubmitting:!1,ratingApi:new o,meCookies:new c["a"]}},computed:{me(){return d["a"].query().first()},ratingInstance(){return l["a"].query().where((t=>t.ratingable_id===this.ratingable.id&&t.ratingable_type_name===this.ratingableTypePlural)).first()},rating(){const t=this.ratingInstance,e=(null===t||void 0===t?void 0:t.positive_votes)||0,s=(null===t||void 0===t?void 0:t.negative_votes)||0,i=e-s;return{positiveVotes:e,negativeVotes:s,result:i,color:(()=>{let t="light-blue-1";return i>0?t="green-5":i<0&&(t="red-5"),t})()}},ratingableTypePlural(){return this.ratingableType+"s"},isMyVotePositive(){if(!this.me)return null;const t=r["a"].query().where((t=>t.user_id===this.me.id&&t.ratingable_id===this.ratingable.id&&t.ratingable_type_name===this.ratingableTypePlural)).first();return t?t.is_positive:null}},methods:{vote(t){if(!this.meCookies.get())return void this.$q.notify({message:this.$t("need_to_login_or_register"),position:"center",color:"negative"});if("up"===t&&this.isMyVotePositive||"down"===t&&!1===this.isMyVotePositive)return;const e=null!==this.isMyVotePositive;this.isSubmitting=!0,this.ratingApi.vote(this.ratingableType,this.ratingable.id,"up"===t).then((async s=>{this.isSubmitting=!1,await r["a"].insertOrUpdate({data:s.data}),await this.updateRating(t,e),this.$q.notify({message:this.$t("your_vote_is_accepted"),position:"center",color:"green"})})).catch((t=>{this.isSubmitting=!1,this.$q.notify({message:t.response.data.message,position:"center",color:"red"})}))},async updateRating(t,e){if(this.ratingInstance){let s=this.ratingInstance.positive_votes,i=this.ratingInstance.negative_votes;"up"===t?(s++,e&&i--):(i++,e&&s--),await l["a"].update({where:this.ratingInstance.id,data:{positive_votes:s,negative_votes:i}})}else await l["a"].insert({data:{ratingable_id:this.ratingable.id,ratingable_type_name:this.ratingableTypePlural,positive_votes:"up"===t?1:0,negative_votes:"down"===t?1:0}})}}},p=u,h=s("2877"),m=s("6b1d"),f=s("9c40"),g=s("05c0"),b=s("b047"),v=s("eebe"),_=s.n(v),y=Object(h["a"])(p,i,a,!1,null,null,null);e["a"]=y.exports;_()(y,"components",{QLinearProgress:m["a"],QBtn:f["a"],QTooltip:g["a"],QChip:b["a"]})},db11:function(t,e,s){},deb1:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{attrs:{flat:"",bordered:""}},[t.isFetching?s("q-card-section",[s("q-linear-progress",{attrs:{indeterminate:""}})],1):t._e(),t.isFetching?t._e():[s("q-item",[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{class:{"cursor-pointer":t.isProfilePage},on:{click:t.onAvatarClick}},[s("user-avatar",{attrs:{size:"40px",src:t.avatar}})],1)],1),s("q-item-section",[s("q-item-label",{staticStyle:{"font-size":"1.2rem","font-weight":"bold",color:"#585961"}},[t._v(t._s(t.stats.profile.login))]),s("q-item-label",{attrs:{caption:""}},[t._v("З нами: "+t._s(t.moment(t.stats.profile.with_us_since).fromNow(!0)))])],1)],1),s("q-separator"),s("q-card-section",[s("chip-info",{attrs:{icon:"thumbs_up_down",label:t.stats.rating.positive-t.stats.rating.negative,tooltip:t.$t("rating")+" ("+t.stats.rating.positive+" - "+t.stats.rating.negative+")"}}),s("chip-info",{attrs:{"bg-color":"green-3",icon:"thumb_up_off_alt",label:t.stats.votes.positive,tooltip:t.$t("voted_positive")}}),s("chip-info",{attrs:{"bg-color":"red-3",icon:"thumb_down_off_alt",label:t.stats.votes.negative,tooltip:t.$t("voted_negative")}}),s("chip-info",{attrs:{icon:"mms",label:t.stats.total_posts,tooltip:t.$t("total_posts")}}),s("chip-info",{attrs:{icon:"mode_comment",label:t.stats.total_comments,tooltip:t.$t("total_comments")}})],1)]],2)},a=[],n=(s("e6cf"),s("1877")),o=s("ce77"),r=s("c1df"),l=s.n(r),c=s("1da2"),d=s("891a");l.a.locale("uk");var u={name:"Stats",props:{userId:{type:Number,required:!0}},components:{ChipInfo:c["a"],UserAvatar:n["a"]},data(){return{stats:{},isFetching:!0,api:new o["a"],moment:l.a}},computed:{me(){return d["a"].query().first()},isProfilePage(){return"profile"===this.$route.name},avatar(){var t,e,s;let i=null;const a="/storage/user-avatars/o";let n=null===this||void 0===this||null===(t=this.me)||void 0===t?void 0:t.avatar;return this.isProfilePage&&n&&(i=`${a}/${n}`),n=null===(e=this.stats)||void 0===e||null===(s=e.profile)||void 0===s?void 0:s.avatar,n&&(i=`${a}/${n}`),i}},created(){this.fetchStats()},methods:{async fetchStats(){const t=await this.api.fetchStats(this.userId);this.stats=t.data,this.isFetching=!1,this.$emit("fetched")},onAvatarClick(){this.isProfilePage&&this.$emit("avatarClicked")}}},p=u,h=s("2877"),m=s("f09f"),f=s("a370"),g=s("6b1d"),b=s("66e5"),v=s("4074"),_=s("cb32"),y=s("0170"),w=s("eb85"),j=s("eebe"),q=s.n(j),P=Object(h["a"])(p,i,a,!1,null,null,null);e["a"]=P.exports;q()(P,"components",{QCard:m["a"],QCardSection:f["a"],QLinearProgress:g["a"],QItem:b["a"],QItemSection:v["a"],QAvatar:_["a"],QItemLabel:y["a"],QSeparator:w["a"]})},e118:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{error:t.errorMessage}},[s("q-input",{ref:"textField",attrs:{type:"textarea",autogrow:"",outlined:""},on:{input:t.input},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}),t.errorMessage?s("span",{staticStyle:{color:"red"}},[t._v(t._s(t.errorMessage))]):t._e()],1)},a=[],n=(s("5319"),s("4f9d")),o={name:"PostForm",props:{content:{type:String,required:""},order:{type:Number,required:!0},errorMessage:{type:[String]}},data(){return{model:"",postEditor:new n["a"]}},watch:{model(t){this.postEditor.updateSection(this.order,t)}},created(){this.model=this.replaceBr(this.content)},methods:{input(){this.$emit("input",this.model)},replaceBr(t){return t?t.replace(/<br>/g,""):""}}},r=o,l=s("2877"),c=s("27f9"),d=s("eebe"),u=s.n(d),p=Object(l["a"])(r,i,a,!1,null,null,null);e["a"]=p.exports;u()(p,"components",{QInput:c["a"]})},e600:function(t,e,s){},e73e:function(t,e,s){},e7bd:function(t,e,s){"use strict";s("db11")},f01b:function(t,e,s){"use strict";s("8402")},f724:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("iframe",{attrs:{frameborder:"0",allowfullscreen:"1",width:"100%",height:t.$q.platform.is.mobile?200:400,src:t.src}})},a=[],n={name:"YouTube",props:{videoId:{type:String,required:!0}},data(){return{src:null}},created(){this.src="https://www.youtube.com/embed/"+this.videoId},methods:{updateSrc(t){this.src="https://www.youtube.com/embed/"+t}}},o=n,r=s("2877"),l=Object(r["a"])(o,i,a,!1,null,null,null);e["a"]=l.exports},f9a5:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-card",{staticClass:"q-my-md",attrs:{id:"post-id-"+t.post.id,dusk:"post-"+t.post.id,bordered:!t.$q.platform.is.mobile,flat:""}},[s("q-card-section",{staticClass:"q-pb-none"},[s("div",{staticClass:"flex justify-between"},[s("div",[s("author",{attrs:{name:t.post.user.login,avatar:t.post.user.avatar?"/storage/user-avatars/r/"+t.post.user.avatar:null,user:t.post.user}})],1),s("div")]),t.isPostView?s("q-item",{staticClass:"q-px-none",attrs:{dusk:"post-"+t.post.id+"-title"}},[s("q-item-section",{staticStyle:{"font-size":"1.2rem"}},[t._v("\n          "+t._s(t.post.title)+"\n        ")])],1):t._e(),t.isPostView?t._e():s("q-item",{staticClass:"q-px-none",attrs:{dense:"",to:{name:"postView",params:{id:t.post.id}},dusk:"post-"+t.post.id+"-title"}},[s("q-item-section",{staticStyle:{"font-size":"1.2rem"}},[t._v("\n          "+t._s(t.post.title)+"\n        ")])],1)],1),s("q-card-section",{ref:"postBody",class:{folded:!t.postCache.is_expanded&&!t.isPostView}},t._l(t.post.content,(function(t){return s("post-"+t.type,{key:"postSection-"+t.order,tag:"component",attrs:{data:t}})})),1),t.postCache.is_expanded||t.isPostView?t._e():s("q-card-section",{staticClass:"q-pt-none"},[s("div",{staticClass:"expander",on:{click:t.expand}},[t._v("\n        "+t._s(t.$t("expand"))+"\n      ")])]),s("q-card-section",{attrs:{dusk:"post-"+t.post.id+"-info"}},[s("post-info",{attrs:{post:t.post,"is-post-view":t.isPostView}})],1),t.$q.platform.is.mobile?s("q-separator"):t._e()],1)],1)},a=[],n=(s("e6cf"),s("ddb0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{color:"#757575"}},[s("div",{staticClass:"flex cursor-default items-center"},[s("rating",{attrs:{ratingable:t.post,"ratingable-type":"post"}}),s("div",{attrs:{dusk:"post-"+t.post.id+"-info-views"}},[s("chip-info",{attrs:{label:t.post.views,icon:"visibility",tooltip:t.$t("views")}})],1),s("div",{attrs:{dusk:"post-"+t.post.id+"-info-comments"}},[s("chip-info",{attrs:{label:t.post.comments,icon:"question_answer",tooltip:t.$t("total_comments")}},[t.isPostView?t._e():s("q-item",{staticStyle:{padding:"5px","margin-left":"5px"},attrs:{dense:"",to:{name:"postView",params:{id:t.post.id,toComments:!0}}}},[s("q-item-section",[s("q-icon",{attrs:{color:"grey-7",name:"launch",size:"sm"}})],1)],1)],1)],1)],1),s("div",{staticClass:"q-mt-md flex",attrs:{dusk:"post-"+t.post.id+"-info-tags"}},t._l(t.post.tags,(function(t,e){return s("tag",{key:"tag"+e,attrs:{item:t}})})),1)])}),o=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-item",{staticClass:"t-wrapper",attrs:{exact:"",to:{name:"search",query:{tids:t.item.id}}}},[t.item.body?s("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"scale","transition-hide":"scale","max-width":"300px"}},[s("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(t.item.body))])]):t._e(),t._v("\n\n  "+t._s(t.item.title)+"\n")],1)},l=[],c={name:"Tag",props:{item:{type:Object,required:!0}}},d=c,u=(s("01a2"),s("2877")),p=s("66e5"),h=s("05c0"),m=s("eebe"),f=s.n(m),g=Object(u["a"])(d,r,l,!1,null,null,null),b=g.exports;f()(g,"components",{QItem:p["a"],QTooltip:h["a"]});var v=s("d171"),_=s("1da2"),y={name:"PostInfo",components:{ChipInfo:_["a"],Tag:b,Rating:v["a"]},props:{post:{type:Object,required:!0},isPostView:{type:Boolean,required:!0}},data(){return{}}},w=y,j=(s("e7bd"),s("4074")),q=s("0016"),P=Object(u["a"])(w,n,o,!1,null,null,null),I=P.exports;f()(P,"components",{QItem:p["a"],QItemSection:j["a"],QIcon:q["a"]});var k=s("5e86"),S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{domProps:{innerHTML:t._s(t.data.body)}})},$=[],x=s("f67e"),C={name:"PostText",props:{data:{type:x["a"],required:!0}}},E=C,z=Object(u["a"])(E,S,$,!1,null,null,null),M=z.exports,Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"image",staticClass:"flex justify-center"},[s("img",{staticStyle:{"max-width":"100%"},style:{margin:"10px 0 15px 0",borderRadius:"5px"},attrs:{src:t.imageUrl,alt:"Зображення"}})]),t.data.title?s("div",{staticClass:"q-mb-lg text-center"},[t._v("\n    "+t._s(t.data.title)+"\n  ")]):t._e()])},F=[],O=s("ee7a"),T={name:"PostImage",props:{data:{type:O["a"],required:!0}},data(){return{isImageWiderThanWrapper:null}},computed:{isDesktop(){return this.$q.platform.is.desktop},imageUrl(){const t=this.$q.platform.is.desktop;return t?this.data.desktop_file_path||this.data.original_file_path:this.data.mobile_file_path||this.data.desktop_file_path||this.data.original_file_path},imageWidth(){const t=this.data.imageData;return this.isDesktop?this.data.desktop_file_path?t.desktop.width:t.original.width:this.data.mobile_file_path?t.mobile.width:t.original.width}},mounted(){this.isImageWiderThanWrapper=this.$refs.image.offsetWidth<this.data.width}},A=T,B=Object(u["a"])(A,Q,F,!1,null,null,null),V=B.exports,D=s("5fb2c"),L=s("26d8"),W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("you-tube",{attrs:{"video-id":t.data.youtube_id}})},N=[],R=s("f724"),U=s("dc64"),Y={name:"PostYoutube",components:{YouTube:R["a"]},props:{data:{type:U["a"],required:!0}},data(){return{}}},H=Y,K=Object(u["a"])(H,W,N,!1,null,null,null),X=K.exports,J={name:"Post",components:{PostImage:V,PostText:M,PostInfo:I,Author:D["a"],PostYoutube:X},props:{post:{type:k["a"],required:!0},isPostView:{type:Boolean,required:!1}},data(){return{cache:new L["a"],postCache:{is_expanded:!1,is_images_loaded:!1},isHasImages:!1,postId:null}},async created(){this.isHasImages=!!this.post.post_images.length,this.postCache=await this.cache.getOrCreateEntityCache("posts",this.post.id)},async mounted(){this.isHasImages||this.postCache.is_expanded||await this.maybeExpandBody("mounted"),this.postCache.is_expanded||!this.isHasImages||this.postCache.is_images_loaded||this.imagesLoadedHandler()},methods:{isShortBody(){const t=this.$refs.postBody.$el.scrollHeight,e=.49*window.innerHeight;return t<e+41},async expand(){this.isExpanded=!0,this.postCache=await this.cache.updateEntityCache("posts",this.post.id,{is_expanded:!0})},async maybeExpandBody(t=!1){const e={is_images_loaded:t};this.isShortBody()&&(e.is_expanded=!0),this.postCache=await this.cache.updateEntityCache("posts",this.post.id,e)},imagesLoadedHandler(){const t=this.$refs.postBody.$el.getElementsByTagName("img");Promise.all(Array.from(t).filter((t=>!t.complete)).map((t=>new Promise((e=>{t.onload=t.onerror=e}))))).then((()=>{setTimeout((()=>{this.maybeExpandBody(!0)}),10)}))}}},G=J,Z=(s("f01b"),s("f09f")),tt=s("a370"),et=s("9c40"),st=s("eb85"),it=Object(u["a"])(G,i,a,!1,null,null,null);e["a"]=it.exports;f()(it,"components",{QCard:Z["a"],QCardSection:tt["a"],QBtn:et["a"],QItem:p["a"],QItemSection:j["a"],QSeparator:st["a"]})}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{b2c5:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row justify-center"},[s("div",{staticClass:"col-sm-12 col-xs-12 col-md-6 col-lg-4 col-xl-4"},[s("div",{staticClass:"flex column justify-center q-px-md",staticStyle:{height:"100vh"}},[s("q-form",{attrs:{dusk:"l-login-form"},on:{submit:e.onSubmit}},[s("q-card",[s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("login")))])]),s("q-separator"),s("q-card-section",[s("q-input",{attrs:{dusk:"l-email-input",outlined:"",dense:"",autocomplete:"username",label:e.$t("email"),error:!!e.validator.errors.email,"error-message":e.validator.errors.email},on:{input:function(t){return e.validator.resetErrors()}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),s("q-input",{attrs:{dusk:"l-password-input",outlined:"",dense:"",autocomplete:"current-password",type:"password",label:e.$t("password"),error:!!e.validator.errors.password,"error-message":e.validator.errors.password},on:{input:function(t){return e.validator.resetErrors()}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e.validator.errors.error_message?s("q-banner",{staticClass:"text-white bg-red q-mb-md",attrs:{dusk:"l-error-message",rounded:"","inline-actions":""}},[e._v("\n              "+e._s(e.validator.errors.error_message)+"\n            ")]):e._e(),s("q-item",{attrs:{dusk:"l-forgot-password-link",to:{name:"forgot_password"},clickable:""}},[s("q-item-section",[e._v(e._s(e.$t("forgot_your_password"))+"?")])],1)],1),s("q-separator"),s("q-card-actions",{staticClass:"q-pa-md"},[s("q-btn",{attrs:{dusk:"l-login-form-submit",disable:e.formIsBusy,loading:e.formIsBusy,label:e.$t("log_in"),type:"submit",color:"primary"}})],1)],1)],1)],1)])])},a=[],o=s("6357"),n=(s("e6cf"),s("77fc"));class i{constructor(){if(i.instance)return i.instance;this.api=new n["a"],this.token=null,this.expiresIn=null,i.instance=this}createToken(e,t){return new Promise(((s,r)=>{this.api.post("token",{grant_type:"password",client_id:2,client_secret:"sFKCIaMm0CcttGi21C2d3nYfzebevgB4owYad5SM",username:e,password:t},null,null,!0).then((e=>s(e))).catch((e=>{r(e)}))}))}refreshToken(){return new Promise(((e,t)=>{this.api.post("/oauth/token").then((t=>{e(t)})).catch((e=>{console.error(e),t(e)}))}))}}var l=s("ce77"),c=s("7a4a"),d=s("891a"),u=s("b65d");const m={email:null,password:null};var p={name:"Login",data(){return{form:m,formIsBusy:!1,validator:new o["a"](m),tokenApi:new i,userApi:new l["a"],tokenCookies:new c["a"],meCookies:new u["a"],api:new n["a"]}},methods:{onSubmit(){this.formIsBusy=!0,this.tokenApi.createToken(this.form.email,this.form.password).then((e=>{this.formIsBusy=!1,this.tokenCookies.set(e.data),this.api.setBearer(this.tokenCookies.getAuthorizationToken()),this.userApi.fetchMe().then((e=>{const t=e.data;this.meCookies.set(t),d["a"].create({data:t}),this.$router.push({name:"home"})}))})).catch((e=>{this.formIsBusy=!1,this.validator.setErrors(e)}))}}},f=p,h=s("2877"),w=s("0378"),k=s("f09f"),b=s("a370"),v=s("eb85"),g=s("27f9"),_=s("54e1"),C=s("66e5"),q=s("4074"),y=s("4b7e"),I=s("9c40"),x=s("eebe"),B=s.n(x),Q=Object(h["a"])(f,r,a,!1,null,null,null);t["default"]=Q.exports;B()(Q,"components",{QForm:w["a"],QCard:k["a"],QCardSection:b["a"],QSeparator:v["a"],QInput:g["a"],QBanner:_["a"],QItem:C["a"],QItemSection:q["a"],QCardActions:y["a"],QBtn:I["a"]})}}]);
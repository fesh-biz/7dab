(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"0668":function(e,t,s){},"713b":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-layout",{attrs:{view:"lHh Lpr lFf"}},[s("q-header",{staticClass:"ml-header text-grey"},[s("q-toolbar",[s("q-space"),s("q-btn-dropdown",{staticClass:"bg-primary glossy",attrs:{color:"white",id:"menuButton",dusk:"ml-menu","dropdown-icon":"menu","no-caps":"",flat:"",dense:"",rounded:""}},[s("div",{staticStyle:{width:"350px"}},[s("div",{staticClass:"q-pa-md bg-light-blue-1",staticStyle:{"border-radius":"5px 5px 0 0"}},[s("strong",[e._v("Теревеньки - ")]),e._v(" Українці зі всього світу спілкуються тут!\n            Приєднуйся!\n          ")]),s("div",{staticClass:"row no-wrap q-pa-md"},[s("div",{staticClass:"column"},[s("q-list",{attrs:{dense:""}},[s("q-item",{attrs:{tag:"a",href:"/",native:""}},[s("q-item-section",[e._v(e._s(e.$t("home_page")))])],1),s("q-item",{attrs:{exact:"",clickable:"",to:{name:"search"}}},[s("q-item-section",[e._v("\n                    "+e._s(e.$t("search"))+"\n                  ")])],1),s("q-item",{attrs:{exact:"",clickable:"",to:{name:"createPost"}}},[s("q-item-section",[e._v("\n                    "+e._s(e.$t("add_post"))+"\n                  ")])],1)],1)],1),s("q-separator",{staticClass:"q-mx-lg",attrs:{vertical:"",inset:""}}),s("div",{staticClass:"column"},[e.me?e._e():s("guest-menu"),e.me?s("user-menu"):e._e()],1)],1)])])],1)],1),s("q-page-container",{staticStyle:{"padding-top":"unset"}},[s("q-page",[s("div",{staticClass:"row justify-center q-px-sm"},[s("div",{staticClass:"col-sm-12 col-xs-12 col-md-8 col-lg-6 col-xl-5"},[s("router-view")],1)])])],1),s("verify-email")],1)},a=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"column items-center"},[s("user-avatar",{attrs:{src:e.me.avatar?"/storage/user-avatars/o/"+e.me.avatar:null}}),s("div",{staticClass:"text-subtitle1 q-mt-md q-mb-xs",attrs:{dusk:"um-user-name"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"positive","no-caps":"",label:e.me.login,to:{name:"profile"},push:"",size:"sm"}})],1),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dusk:"um-logout-link",color:"primary",label:e.$t("logout"),push:"",size:"sm"},on:{click:e.logout}})],1)},o=[],r=(s("e6cf"),s("891a")),c=s("b65d"),l=s("1877"),u=s("ce77"),m=s("7a4a"),d=s("77fc"),p={name:"UserMenu",components:{UserAvatar:l["a"]},data(){return{userApi:new u["a"],tokenCookies:new m["a"],meCookies:new c["a"],api:new d["a"]}},computed:{me(){return r["a"].query().first()}},methods:{async logout(){await this.userApi.logout().then((()=>{this.deleteUserData()})).catch((()=>{this.deleteUserData()}))},deleteUserData(){this.api.deleteBearer(),this.tokenCookies.delete(),this.meCookies.delete(),r["a"].deleteAll(),"home"!==this.$route.name&&this.$router.push({name:"home"})}}},h=p,g=s("2877"),f=s("9c40"),v=s("7f67"),q=s("eebe"),b=s.n(q),_=Object(g["a"])(h,n,o,!1,null,null,null),k=_.exports;b()(_,"components",{QBtn:f["a"]}),b()(_,"directives",{ClosePopup:v["a"]});var w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-list",{attrs:{dense:""}},[s("q-item",{attrs:{dusk:"gm-login-link",exact:"",clickable:"",to:{name:"login"}}},[s("q-item-section",[e._v(e._s(e.$t("login")))])],1),s("q-item",{attrs:{dusk:"gm-registration-link",exact:"",clickable:"",to:{name:"register"}}},[s("q-item-section",[e._v(e._s(e.$t("register")))])],1)],1)},y=[],C={name:"GuestMenu",data(){return{}},computed:{me(){return r["a"].query().first()}}},S=C,Q=s("1c1c"),x=s("66e5"),M=s("4074"),$=Object(g["a"])(S,w,y,!1,null,null,null),V=$.exports;b()($,"components",{QList:Q["a"],QItem:x["a"],QItemSection:M["a"]});var F=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-dialog",{attrs:{persistent:""},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[s("q-card",[e.isSuccess?e._e():[s("q-card-section",[s("p",[e._v("Спочатку вам необхідно підтвердити ваш Email.")]),s("q-btn",{attrs:{"no-caps":"",label:"Надіслати посилання",color:"positive",loading:e.sendingVerification,disable:e.sendingVerification||e.isSent},on:{click:e.sendVerification}})],1),e.isSent?s("q-card-section",[e._v("\n        Ми надіслали вам інструкцію на ваш email для підтвердження.\n        Якщо ви не бачите листа, "),s("strong",[e._v("перевірте вашу папку для спаму")]),e._v(".\n      ")]):e._e(),e.isSent?s("q-card-section",[s("p",[e._v("Щоб оновити дані:")]),s("q-btn",{attrs:{label:"Оновити",loading:e.isFetchingMe,disable:e.isFetchingMe||e.isFetchedMe,color:"positive"},on:{click:e.checkEmailIsVerified}})],1):e._e()],e.isSuccess?s("q-card-section",[s("h2",[e._v("Усе ок!")])]):e._e(),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{"no-caps":"",label:e.isSuccess?"Ок":"Скасувати",color:e.isSuccess?"positive":"negative"},on:{click:e.reset}})],1)],2)],1)},E=[],B={name:"VerifyEmail",data(){return{confirm:!1,sendingVerification:!1,api:new u["a"],isSent:!1,isFetchingMe:!1,isFetchedMe:!1,meCookies:new c["a"],isSuccess:!1}},created(){this.$root.$on("verify-email",(()=>{this.confirm=!0}))},methods:{reset(){this.confirm=!1,this.sendingVerification=!1,this.isSent=!1,this.isFetchingMe=!1,this.isFetchedMe=!1,this.isSuccess=!1},async sendVerification(){this.sendingVerification=!0,await this.api.resendEmailVerification(),this.sendingVerification=!1,this.isSent=!0},async checkEmailIsVerified(){this.isFetchingMe=!0;const e=await this.api.fetchMe(),t=e.data;t.is_verified&&(await r["a"].create({data:t}),this.meCookies.set(t)),this.isSuccess=!0,this.isFetchingMe=!1,this.isFetchedMe=!0}}},I=B,U=s("24e8"),j=s("f09f"),A=s("a370"),D=s("4b7e"),L=Object(g["a"])(I,F,E,!1,null,null,null),T=L.exports;b()(L,"components",{QDialog:U["a"],QCard:j["a"],QCardSection:A["a"],QBtn:f["a"],QCardActions:D["a"]});var O={name:"MainLayout",components:{VerifyEmail:T,GuestMenu:V,UserMenu:k},data(){return{}},computed:{me(){return r["a"].query().first()}},mounted(){this.highlightMenuButton()},methods:{highlightMenuButton(){const e=document.querySelector("#menuButton");setTimeout((()=>{e.style.transform="scale(6)",setTimeout((()=>{e.style.transform="scale(1)",setTimeout((()=>{e.style.transform="scale(6)",setTimeout((()=>{e.style.transform="scale(1)"}),300)}),300)}),300)}),300)}}},P=O,z=(s("83ec"),s("4d5a")),G=s("e359"),H=s("65c6"),J=s("2c91"),N=s("f20b"),K=s("eb85"),R=s("09e3"),W=s("9989"),X=Object(g["a"])(P,i,a,!1,null,null,null);t["default"]=X.exports;b()(X,"components",{QLayout:z["a"],QHeader:G["a"],QToolbar:H["a"],QSpace:J["a"],QBtnDropdown:N["a"],QList:Q["a"],QItem:x["a"],QItemSection:M["a"],QSeparator:K["a"],QPageContainer:R["a"],QPage:W["a"],QBtn:f["a"]})},"83ec":function(e,t,s){"use strict";s("0668")}}]);
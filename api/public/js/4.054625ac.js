(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"01a2":function(t,e,s){"use strict";s("247c")},"0d8b":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row justify-center q-px-sm"},[s("div",{staticClass:"col-sm-12 col-xs-12 col-md-8 col-lg-6 col-xl-5"},[t.fetching.posts?s("q-linear-progress",{class:{"q-mt-md":!t.$q.platform.is.mobile},attrs:{indeterminate:""}}):t._e(),t._l(t.posts,(function(t,e){return s("post",{key:"post"+e,attrs:{post:t}})})),t.isLastFetched?s("q-banner",{staticClass:"text-center",attrs:{dusk:"main-no-more-posts",rounded:""}},[t._v("\n      "+t._s(t.$t("there_is_no_new_posts"))+"\n    ")]):t._e(),t.fetching.posts&&t.posts.length?s("q-linear-progress",{staticClass:"q-mb-xl",attrs:{dusk:"main-new-posts-loading",indeterminate:""}}):t._e()],2)])},i=[],a=(s("e6cf"),s("5e86")),n=s("f9a5"),r=s("7cbd");function c(t){const e=document.documentElement.offsetHeight,s=window.innerHeight,o=window.scrollY||window.pageYOffset||document.body.scrollTop+(document.documentElement&&document.documentElement.scrollTop||0);return e<=s+o+(t||0)}var l={name:"FeedMain",components:{Post:n["a"]},data(){return{fetching:{posts:!1},isLastFetched:!1,currentPage:0,postApi:new r["a"]}},computed:{posts(){return a["a"].query().withAll().orderBy("id","desc").all()}},async created(){this.posts.length<2&&(await a["a"].deleteAll(),this.fetchPosts(!0))},mounted(){window.addEventListener("scroll",this.maybeFetchNextPosts)},methods:{scrollToPost(t){const e=document.getElementById(t);e?setTimeout((()=>{e.scrollIntoView({behavior:"smooth"})}),100):setTimeout((()=>{this.scrollToPost(t)}),100)},maybeFetchNextPosts(){this.fetching.posts||!c(500)||this.isLastFetched||this.fetchPosts()},fetchPosts(t){console.log("fetching, page ",this.currentPage),this.fetching.posts=!0,this.postApi.fetchPosts(++this.currentPage).then((async e=>{t?await a["a"].create({data:e.data.data}):await a["a"].insert({data:e.data.data}),this.isLastFetched=e.data.meta.is_last,this.$nextTick((()=>{this.fetching.posts=!1}))})).catch((()=>{this.fetching.posts=!1}))}},beforeDestroy(){window.removeEventListener("scroll",this.maybeFetchNextPosts)}},p=l,d=s("2877"),m=s("6b1d"),u=s("54e1"),h=s("eebe"),f=s.n(h),_=Object(d["a"])(p,o,i,!1,null,null,null);e["default"]=_.exports;f()(_,"components",{QLinearProgress:m["a"],QBanner:u["a"]})},"247c":function(t,e,s){},"7cbd":function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));s("e6cf");var o=s("77fc");class i{constructor(){if(i.instance)return i.instance;this.api=new o["a"],i.instance=this}fetchPost(t){return new Promise(((e,s)=>{this.api.get(`content/posts/${t}`).then((t=>{e(t)})).catch((t=>{s(t)}))}))}fetchPosts(t){return new Promise(((e,s)=>{this.api.get(`/content/posts?page=${t}`).then((t=>{e(t)})).catch((t=>{s(t)}))}))}store(t){return new Promise(((e,s)=>{this.api.post("/content/posts",t,{headers:{"Content-Type":"multipart/form-data"}}).then((t=>e(t))).catch((t=>{s(t)}))}))}update(t,e){return new Promise(((s,o)=>{this.api.put(`/content/posts/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}}).then((t=>s(t))).catch((t=>{o(t)}))}))}}},a31e:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"scale","transition-hide":"scale"}},[t._v("\n    "+t._s(t.tooltip)+"\n  ")]),s("q-icon",{staticClass:"q-mr-xs",attrs:{size:t.iconSize,name:t.iconName},on:{click:function(e){return t.$emit("click")}}})],1)},i=[],a={name:"TooltipIcon",props:{tooltip:{type:String,required:!0},iconName:{type:String,required:!0},iconSize:{type:String,default:"sm"}},data(){return{}}},n=a,r=s("2877"),c=s("05c0"),l=s("0016"),p=s("eebe"),d=s.n(p),m=Object(r["a"])(n,o,i,!1,null,null,null);e["a"]=m.exports;d()(m,"components",{QTooltip:c["a"],QIcon:l["a"]})},f9a5:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{staticClass:"q-my-md",attrs:{id:"post-id-"+t.post.id,dusk:"post-"+t.post.id,flat:t.$q.platform.is.mobile}},[s("q-card-section",{staticClass:"q-pb-none"},[s("div",{attrs:{dusk:"post-"+t.post.id+"-author"}},[t._v("\n      "+t._s(t.post.user.login)+"\n    ")]),t.isPostPage?s("q-item",{staticClass:"font-lobster q-px-none",attrs:{dusk:"post-"+t.post.id+"-title"}},[s("q-item-section",{staticStyle:{"font-size":"1.2rem"}},[t._v("\n        "+t._s(t.post.title)+"\n      ")])],1):t._e(),t.isPostPage?t._e():s("q-item",{staticClass:"font-lobster q-px-none",attrs:{dense:"",to:{name:"postPage",params:{id:t.post.id}},dusk:"post-"+t.post.id+"-title"}},[s("q-item-section",{staticStyle:{"font-size":"1.2rem"}},[t._v("\n        "+t._s(t.post.title)+" "+t._s(t.post.id)+"\n      ")])],1)],1),s("q-card-section",t._l(t.post.content,(function(t){return s("post-"+t.type,{key:"postSection-"+t.order,tag:"component",attrs:{data:t}})})),1),s("q-card-section",{attrs:{dusk:"post-"+t.post.id+"-info"}},[s("post-info",{attrs:{post:t.post}})],1),t.$q.platform.is.mobile?s("q-separator"):t._e()],1)},i=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{color:"#757575"}},[s("div",{staticClass:"flex cursor-default"},[s("div",{staticClass:"q-mr-md",attrs:{dusk:"post-"+t.post.id+"-info-rating"}},[s("post-info-icon",{attrs:{icon:"thumbs_up_down",amount:t.post.post_stat.rating,"tooltip-label":t.$t("rating")}})],1),s("div",{staticClass:"q-mr-md",attrs:{dusk:"post-"+t.post.id+"-info-views"}},[s("post-info-icon",{attrs:{icon:"visibility",amount:t.post.post_stat.views,"tooltip-label":t.$t("views")}})],1),s("div",{staticClass:"q-mr-md",attrs:{dusk:"post-"+t.post.id+"-info-comments"}},[s("post-info-icon",{attrs:{icon:"question_answer",amount:t.post.post_stat.comments,"tooltip-label":t.$t("comments")}})],1)]),s("div",{staticClass:"q-mt-md flex",attrs:{dusk:"post-"+t.post.id+"-info-tags"}},t._l(t.post.tags,(function(t,e){return s("tag",{key:"tag"+e,attrs:{item:t}})})),1)])},n=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-item",{staticClass:"t-wrapper",attrs:{to:"test"}},[s("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"scale","transition-hide":"scale","max-width":"300px"}},[s("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(t.item.body))])]),t._v("\n\n  "+t._s(t.item.title)+"\n")],1)},c=[],l={name:"Tag",props:{item:{type:Object,required:!0}}},p=l,d=(s("01a2"),s("2877")),m=s("66e5"),u=s("05c0"),h=s("eebe"),f=s.n(h),_=Object(d["a"])(p,r,c,!1,null,null,null),g=_.exports;f()(_,"components",{QItem:m["a"],QTooltip:u["a"]});var b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex"},[s("tooltip-icon",{attrs:{"icon-size":"xs","icon-name":t.icon,tooltip:t.tooltipLabel}}),t._v(" "+t._s(t.amount)+"\n")],1)},q=[],v=s("a31e"),w={name:"PostInfoIcon",components:{TooltipIcon:v["a"]},props:{amount:{type:Number,required:!0},tooltipLabel:{type:String,required:!0},icon:{type:String,required:!0}},data(){return{}}},y=w,P=Object(d["a"])(y,b,q,!1,null,null,null),x=P.exports,k={name:"PostInfo",components:{PostInfoIcon:x,Tag:g},props:{post:{type:Object,required:!0}}},$=k,C=Object(d["a"])($,a,n,!1,null,null,null),T=C.exports,I=s("5e86"),S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{domProps:{innerHTML:t._s(t.data.body)}})},E=[],j=s("f67e"),Q={name:"PostText",props:{data:{type:j["a"],required:!0}}},O=Q,L=Object(d["a"])(O,S,E,!1,null,null,null),W=L.exports,F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"image",staticClass:"flex justify-center",staticStyle:{width:"100%"}},[s("q-img",{style:{margin:"10px 0 15px 0",borderRadius:"5px",width:t.isImageWiderThanWrapper?"100%":t.imageWidth+"px"},attrs:{src:t.imageUrl,"spinner-color":"white"}})],1),t.data.title?s("div",{staticClass:"font-lobster q-mb-lg text-center"},[t._v("\n    "+t._s(t.data.title)+"\n  ")]):t._e()])},z=[],N=s("ee7a"),A={name:"PostImage",props:{data:{type:N["a"],required:!0}},data(){return{isImageWiderThanWrapper:null}},computed:{isDesktop(){return this.$q.platform.is.desktop},imageUrl(){const t=this.$q.platform.is.desktop;return t?this.data.desktop_file_path||this.data.original_file_path:this.data.mobile_file_path||this.data.desktop_file_path||this.data.original_file_path},imageWidth(){const t=this.data.imageData;return this.isDesktop?this.data.desktop_file_path?t.desktop.width:t.original.width:this.data.mobile_file_path?t.mobile.width:t.original.width}},mounted(){this.isImageWiderThanWrapper=this.$refs.image.offsetWidth<this.data.width}},B=A,D=s("068f"),H=Object(d["a"])(B,F,z,!1,null,null,null),J=H.exports;f()(H,"components",{QImg:D["a"]});var M={name:"Post",components:{PostImage:J,PostText:W,PostInfo:T},props:{post:{type:I["a"],required:!0},isPostPage:{type:Boolean,default:!1}}},U=M,Y=s("f09f"),R=s("a370"),V=s("4074"),G=s("eb85"),K=Object(d["a"])(U,o,i,!1,null,null,null);e["a"]=K.exports;f()(K,"components",{QCard:Y["a"],QCardSection:R["a"],QItem:m["a"],QItemSection:V["a"],QSeparator:G["a"]})}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"89d6":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("e6cf");var n=a("77fc");class s{constructor(){if(s.instance)return s.instance;this.api=new n["a"],s.instance=this}search(t){return new Promise(((e,a)=>{this.api.get(`/tags/search?title=${t}`).then((t=>e(t))).catch((t=>a(t)))}))}update(t,e){return new Promise(((a,n)=>{this.api.put(`admin/tags/${t}`,e).then((t=>a(t))).catch((t=>n(t)))}))}}},ba2a:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("data-table",{ref:"datatable",attrs:{columns:t.columns,url:"admin/tags/paginated-search",rowKey:"id",title:"Tags","use-body":""},scopedSlots:t._u([{key:"table",fn:function(e){return[a("q-tr",[a("q-td",[t._v("\n          "+t._s(e.props.row.id)+"\n        ")]),a("q-td",[t._v("\n          "+t._s(e.props.row.title)+"\n          "),a("q-popup-edit",{attrs:{buttons:""},on:{save:function(a){return t.storeTag(e.props.row,"title")}},model:{value:e.props.row.title,callback:function(a){t.$set(e.props.row,"title",a)},expression:"props.props.row.title"}},[a("q-input",{on:{focus:function(a){return t.setTagPrevData(e.props.row)},input:function(a){return t.updateTag(e.props.row)}},model:{value:e.props.row.title,callback:function(a){t.$set(e.props.row,"title",a)},expression:"props.props.row.title"}})],1)],1),a("q-td",[t._v("\n          "+t._s(e.props.row.status)+"\n          "),a("q-popup-edit",{attrs:{buttons:""},on:{save:function(a){return t.storeTag(e.props.row,"status")}},model:{value:e.props.row.status,callback:function(a){t.$set(e.props.row,"status",a)},expression:"props.props.row.status"}},[a("status",{attrs:{tag:e.props.row},on:{update:t.updateTag}})],1)],1)],1)]}}])})],1)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-table",{attrs:{title:t.title,data:t.data,columns:t.columns,loading:t.loading,"rows-per-page-label":t.rowsPerPage,pagination:t.pagination,"row-key":t.rowKey,filter:t.filter},on:{"update:pagination":function(e){t.pagination=e},request:t.onRequest},scopedSlots:t._u([{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},t.useBody?{key:"body",fn:function(e){return[t._t("table",null,{props:e})]}}:null],null,!0)})],1)},r=[],i=a("77fc"),l={name:"Datable",props:{columns:{type:Array,required:!0},url:{type:String,required:!0},rowKey:{type:String,required:!0},title:{type:String,required:!0},useBody:{type:Boolean,default:!1}},data(){return{api:new i["a"],filter:"",data:[],rowsPerPage:"0",loading:!1,pagination:{sortBy:"",descending:!1,page:1,rowsPerPage:0,rowsNumber:0}}},created(){this.fetchItems()},methods:{onRequest(t){this.fetchItems(Object.assign(t.pagination,{keyword:this.filter}))},fetchItems(t){this.loading=!0,this.api.get(this.url,t).then((t=>{var e,a,n,s;this.loading=!1,this.rowsPerPage=""+t.data.per_page,this.data=t.data.data,this.pagination={sortBy:null===t||void 0===t||null===(e=t.config)||void 0===e||null===(a=e.params)||void 0===a?void 0:a.sortBy,descending:null===t||void 0===t||null===(n=t.config)||void 0===n||null===(s=n.params)||void 0===s?void 0:s.descending,page:t.data.current_page,rowsPerPage:t.data.per_page,rowsNumber:t.data.total}})).catch((()=>{this.loading=!1}))}}},p=l,u=a("2877"),d=a("eaac"),c=a("27f9"),g=a("0016"),f=a("eebe"),h=a.n(f),m=Object(u["a"])(p,o,r,!1,null,null,null),b=m.exports;h()(m,"components",{QTable:d["a"],QInput:c["a"],QIcon:g["a"]});var v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-select",{attrs:{dence:"",outlined:"",options:t.options},on:{input:t.onChange},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})},w=[],y=a("2ef0"),q=a.n(y),P={name:"Status",props:{tag:{type:Object,required:!0}},data(){return{model:null,options:[{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Rejected",value:"rejected"}]}},created(){this.model=q.a.find(this.options,{value:this.tag.status})},methods:{onChange(){this.$emit("update",Object.assign(this.tag,{status:this.model.value}))}}},_=P,T=a("ddd8"),k=Object(u["a"])(_,v,w,!1,null,null,null),$=k.exports;h()(k,"components",{QSelect:T["a"]});var x=a("89d6");const S=[{name:"id",required:!0,label:"#",align:"left",sortable:!0},{name:"title",required:!0,label:"Title",align:"left",sortable:!0},{name:"status",required:!0,label:"Status",align:"left",sortable:!0}];var D={name:"Tags",components:{DataTable:b,Status:$},data(){return{columns:S,tagApi:new x["a"],tagPrevData:{}}},methods:{setTagPrevData(t){this.tagPrevData=q.a.cloneDeep(t)},updateTag(t){const e=q.a.cloneDeep(this.$refs.datatable.data),a=q.a.findIndex(e,{id:t.id});e.splice(a,1,t),this.$refs.datatable.data=e},storeTag(t,e){const a={};a[e]=t[e],this.tagApi.update(t.id,a).then((()=>{this.$q.notify({message:"Ok",color:"positive"})})).catch((()=>{this.updateTag(this.tagPrevData),this.$q.notify({message:"Fail",color:"negative"})}))}}},j=D,Q=a("bd08"),I=a("db86"),O=a("42a1"),B=Object(u["a"])(j,n,s,!1,null,null,null);e["default"]=B.exports;h()(B,"components",{QTr:Q["a"],QTd:I["a"],QPopupEdit:O["a"],QInput:c["a"]})}}]);
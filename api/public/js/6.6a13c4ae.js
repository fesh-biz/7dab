(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"7b46":function(t,e,a){"use strict";a("7cd0")},"7cd0":function(t,e,a){},f31f:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"admin-posts"},[a("data-table",{ref:"datatable",attrs:{columns:t.columns,url:"admin/posts",rowKey:"id",title:t.title,"use-body":""},scopedSlots:t._u([{key:"table",fn:function(e){return[a("q-tr",[a("q-td",[a("q-item",{attrs:{to:{name:"admin.posts.preview",params:{id:e.props.row.id}},target:"_blank"}},[a("q-item-section",[a("icon-with-tooltip",{attrs:{tooltip:t.$t("preview"),color:"positive",size:"sm",icon:"pageview"}})],1)],1),a("q-item",[a("q-item-section",[a("icon-with-tooltip",{attrs:{tooltip:t.$t("delete"),color:e.props.row.id===t.postIdDeleteConfirmation?"negative":"positive",size:"sm",icon:"delete"},on:{click:function(a){return t.deletePost(e.props.row.id)}}})],1)],1)],1),a("q-td",[t._v("\n          "+t._s(e.props.row.id)+"\n        ")]),a("q-td",[t._v("\n          "+t._s(e.props.row.title)+"\n        ")]),a("q-td",{on:{click:function(a){return t.setPrevData(e.props.row)}}},[t._v("\n          "+t._s(e.props.row.status)+"\n          "),a("q-popup-edit",{attrs:{buttons:""},on:{save:function(a){return t.updatePost(e.props.row,"status")}},model:{value:e.props.row.status,callback:function(a){t.$set(e.props.row,"status",a)},expression:"props.props.row.status"}},[a("status",{attrs:{item:e.props.row,statuses:t.statuses},on:{update:t.updateTableItem}})],1)],1),a("q-td",[t._v("\n          "+t._s(e.props.row.views)+"\n        ")]),a("q-td",[t._v("\n          "+t._s(e.props.row.comments)+"\n        ")]),a("q-td",[t._v("\n          "+t._s(t.moment(e.props.row.created_at).format("YYYY-MM-DD"))+"\n        ")])],1)]}}])})],1)},o=[],n=a("30b7"),i=a("ad45"),l=a("2ef0"),r=a.n(l),d=a("77fc"),p=a("51d9"),u=a("c1df"),c=a.n(u);const m=[{name:"",required:!0,label:"",align:"left",sortable:!0},{name:"id",required:!0,label:"#",align:"left",sortable:!0},{name:"title",required:!0,label:"Title",align:"left",sortable:!0},{name:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"views",required:!0,label:"Views",align:"left",sortable:!0},{name:"comments",required:!0,label:"Comments",align:"left",sortable:!0},{name:"created_at",required:!0,label:"Created at",align:"left",sortable:!0}];var b={name:"Index",components:{IconWithTooltip:p["a"],DataTable:n["a"],Status:i["a"]},data(){return{columns:m,api:new d["a"],prevData:{},updateUrl:"admin/posts",title:"Posts",moment:c.a,statuses:[{label:"Draft",value:"draft"},{label:"Pending",value:"pending"},{label:"Reviewing",value:"reviewing"},{label:"Approved",value:"approved"},{label:"Declined",value:"declined"},{label:"Editing",value:"editing"}],postIdDeleteConfirmation:null}},methods:{deletePost(t){this.postIdDeleteConfirmation===t?this.api.post(`admin/posts/${t}/delete`,null,null,null,!0).then((e=>{this.deleteTableItem(t)})):this.postIdDeleteConfirmation=t},setPrevData(t){this.prevData=r.a.cloneDeep(t)},deleteTableItem(t){const e=r.a.cloneDeep(this.$refs.datatable.data),a=r.a.findIndex(e,{id:t});e.splice(a,1),console.log("tableData",e),this.$refs.datatable.data=e},updateTableItem(t){const e=r.a.cloneDeep(this.$refs.datatable.data),a=r.a.findIndex(e,{id:t.id});e.splice(a,1,t),this.$refs.datatable.data=e},updatePost(t,e){const a={};a[e]=t[e];const s=`admin/posts/${t.id}`;this.api.post(s,a,null,null,!0).then((()=>{this.$q.notify({message:"Ok",color:"positive"})})).catch((()=>{this.updateTableItem(this.prevData),this.$q.notify({message:"Fail",color:"negative"})}))}}},f=b,v=(a("7b46"),a("2877")),w=a("bd08"),h=a("db86"),q=a("66e5"),g=a("4074"),D=a("42a1"),_=a("eebe"),I=a.n(_),$=Object(v["a"])(f,s,o,!1,null,null,null);e["default"]=$.exports;I()($,"components",{QTr:w["a"],QTd:h["a"],QItem:q["a"],QItemSection:g["a"],QPopupEdit:D["a"]})}}]);
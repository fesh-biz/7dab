(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"0668":function(e,t,a){},"713b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"lHh Lpr lFf"}},[a("nav-header"),a("q-page-container",{staticStyle:{"padding-top":"unset"}},[a("q-page",[a("div",{staticClass:"row justify-center q-px-sm"},[a("div",{staticClass:"col-sm-12 col-xs-12 col-md-8 col-lg-6 col-xl-5"},[a("router-view")],1)])])],1),a("verify-email")],1)},i=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{attrs:{persistent:""},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[a("q-card",[e.isSuccess?e._e():[a("q-card-section",[a("p",[e._v("Спочатку вам необхідно підтвердити ваш Email.")]),a("q-btn",{attrs:{"no-caps":"",label:"Надіслати посилання",color:"positive",loading:e.sendingVerification,disable:e.sendingVerification||e.isSent},on:{click:e.sendVerification}})],1),e.isSent?a("q-card-section",[e._v("\n        Ми надіслали вам інструкцію на ваш email для підтвердження.\n        Якщо ви не бачите листа, "),a("strong",[e._v("перевірте вашу папку для спаму")]),e._v(".\n      ")]):e._e(),e.isSent?a("q-card-section",[a("p",[e._v("Щоб оновити дані:")]),a("q-btn",{attrs:{label:"Оновити",loading:e.isFetchingMe,disable:e.isFetchingMe||e.isFetchedMe,color:"positive"},on:{click:e.checkEmailIsVerified}})],1):e._e()],e.isSuccess?a("q-card-section",[a("h2",[e._v("Усе ок!")])]):e._e(),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{"no-caps":"",label:e.isSuccess?"Ок":"Скасувати",color:e.isSuccess?"positive":"negative"},on:{click:e.reset}})],1)],2)],1)},r=[],o=(a("e6cf"),a("ce77")),c=a("891a"),l=a("b65d"),u={name:"VerifyEmail",data(){return{confirm:!1,sendingVerification:!1,api:new o["a"],isSent:!1,isFetchingMe:!1,isFetchedMe:!1,meCookies:new l["a"],isSuccess:!1}},created(){this.$root.$on("verify-email",(()=>{this.confirm=!0}))},methods:{reset(){this.confirm=!1,this.sendingVerification=!1,this.isSent=!1,this.isFetchingMe=!1,this.isFetchedMe=!1,this.isSuccess=!1},async sendVerification(){this.sendingVerification=!0,await this.api.resendEmailVerification(),this.sendingVerification=!1,this.isSent=!0},async checkEmailIsVerified(){this.isFetchingMe=!0;const e=await this.api.fetchMe(),t=e.data;t.is_verified&&(await c["a"].create({data:t}),this.meCookies.set(t)),this.isSuccess=!0,this.isFetchingMe=!1,this.isFetchedMe=!0}}},m=u,d=a("2877"),p=a("24e8"),h=a("f09f"),v=a("a370"),f=a("9c40"),g=a("4b7e"),q=a("eebe"),_=a.n(q),b=Object(d["a"])(m,n,r,!1,null,null,null),k=b.exports;_()(b,"components",{QDialog:p["a"],QCard:h["a"],QCardSection:v["a"],QBtn:f["a"],QCardActions:g["a"]});var w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-header",{staticClass:"ml-header text-grey"},[a("q-toolbar",[a("q-space"),a("q-btn-dropdown",{staticClass:"bg-primary glossy",attrs:{color:"white",id:"menuButton",dusk:"ml-menu","dropdown-icon":"menu","no-caps":"",flat:"",dense:"",rounded:""}},[a("div",{staticStyle:{width:"350px"}},[a("div",{staticClass:"q-pa-md bg-light-blue-1",staticStyle:{"border-radius":"5px 5px 0 0"}},[a("strong",[e._v("Теревеньки - ")]),e._v(" Українці зі всього світу спілкуються тут!\n          Приєднуйся!\n        ")]),a("div",{staticClass:"row no-wrap q-pa-md"},[a("div",{staticClass:"column"},[a("site-menu"),e.me&&1===e.me.id?a("admin-menu"):e._e()],1),a("q-separator",{staticClass:"q-mx-lg",attrs:{vertical:"",inset:""}}),a("div",{staticClass:"column"},[e.me?e._e():a("guest-menu"),e.me?a("user-menu"):e._e()],1)],1)])])],1)],1)},y=[],S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-list",{attrs:{dense:""}},[a("q-item",{attrs:{dusk:"gm-login-link",exact:"",clickable:"",to:{name:"login"}}},[a("q-item-section",[e._v(e._s(e.$t("login")))])],1),a("q-item",{attrs:{dusk:"gm-registration-link",exact:"",clickable:"",to:{name:"register"}}},[a("q-item-section",[e._v(e._s(e.$t("register")))])],1)],1)},Q=[],x={name:"GuestMenu",data(){return{}},computed:{me(){return c["a"].query().first()}}},C=x,M=a("1c1c"),$=a("66e5"),E=a("4074"),V=Object(d["a"])(C,S,Q,!1,null,null,null),F=V.exports;_()(V,"components",{QList:M["a"],QItem:$["a"],QItemSection:E["a"]});var B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column items-center"},[a("user-avatar",{attrs:{src:e.me.avatar?"/storage/user-avatars/o/"+e.me.avatar:null}}),a("div",{staticClass:"text-subtitle1 q-mt-md q-mb-xs",attrs:{dusk:"um-user-name"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"positive","no-caps":"",label:e.me.login,to:{name:"profile"},push:"",size:"sm"}})],1),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dusk:"um-logout-link",color:"primary",label:e.$t("logout"),push:"",size:"sm"},on:{click:e.logout}})],1)},j=[],I=a("1877"),A=a("7a4a"),O=a("77fc"),L={name:"UserMenu",components:{UserAvatar:I["a"]},data(){return{userApi:new o["a"],tokenCookies:new A["a"],meCookies:new l["a"],api:new O["a"]}},computed:{me(){return c["a"].query().first()}},methods:{async logout(){await this.userApi.logout().then((()=>{this.deleteUserData()})).catch((()=>{this.deleteUserData()}))},deleteUserData(){this.api.deleteBearer(),this.tokenCookies.delete(),this.meCookies.delete(),c["a"].deleteAll(),"home"!==this.$route.name&&this.$router.push({name:"home"})}}},U=L,D=a("7f67"),T=Object(d["a"])(U,B,j,!1,null,null,null),H=T.exports;_()(T,"components",{QBtn:f["a"]}),_()(T,"directives",{ClosePopup:D["a"]});var N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-separator",{attrs:{spaced:""}}),a("q-list",{attrs:{dense:""}},[a("q-item",{attrs:{to:{name:"admin.posts"}}},[a("q-item-section",[e._v("Адмінка")])],1)],1)],1)},P=[],z={name:"AdminMenu",data(){return{}}},G=z,J=a("eb85"),K=Object(d["a"])(G,N,P,!1,null,null,null),R=K.exports;_()(K,"components",{QSeparator:J["a"],QList:M["a"],QItem:$["a"],QItemSection:E["a"]});var W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-list",{attrs:{dense:""}},[a("q-item",{attrs:{tag:"a",href:"/",native:""}},[a("q-item-section",[e._v(e._s(e.$t("home_page")))])],1),a("q-item",{attrs:{exact:"",clickable:"",to:{name:"search"}}},[a("q-item-section",[e._v("\n      "+e._s(e.$t("search"))+"\n    ")])],1),a("q-item",{attrs:{exact:"",clickable:"",to:{name:"createPost"}}},[a("q-item-section",[e._v("\n      "+e._s(e.$t("add_post"))+"\n    ")])],1),a("q-item",{attrs:{exact:"",clickable:"",to:{name:"static.rules"}}},[a("q-item-section",[e._v("\n      "+e._s(e.$t("our_rules"))+"\n    ")])],1)],1)},X=[],Y={name:"SiteMenu",data(){return{}}},Z=Y,ee=Object(d["a"])(Z,W,X,!1,null,null,null),te=ee.exports;_()(ee,"components",{QList:M["a"],QItem:$["a"],QItemSection:E["a"]});var ae={name:"NavHeader",components:{SiteMenu:te,AdminMenu:R,GuestMenu:F,UserMenu:H},data(){return{}},computed:{me(){return c["a"].query().first()}},mounted(){this.highlightMenuButton()},methods:{highlightMenuButton(){const e=document.querySelector("#menuButton");setTimeout((()=>{e.style.transform="scale(6)",setTimeout((()=>{e.style.transform="scale(1)",setTimeout((()=>{e.style.transform="scale(6)",setTimeout((()=>{e.style.transform="scale(1)"}),300)}),300)}),300)}),300)}}},se=ae,ie=a("e359"),ne=a("65c6"),re=a("2c91"),oe=a("f20b"),ce=Object(d["a"])(se,w,y,!1,null,null,null),le=ce.exports;_()(ce,"components",{QHeader:ie["a"],QToolbar:ne["a"],QSpace:re["a"],QBtnDropdown:oe["a"],QSeparator:J["a"]});var ue={name:"MainLayout",components:{NavHeader:le,VerifyEmail:k},data(){return{}}},me=ue,de=(a("83ec"),a("4d5a")),pe=a("09e3"),he=a("9989"),ve=Object(d["a"])(me,s,i,!1,null,null,null);t["default"]=ve.exports;_()(ve,"components",{QLayout:de["a"],QPageContainer:pe["a"],QPage:he["a"],QBtn:f["a"]})},"83ec":function(e,t,a){"use strict";a("0668")}}]);
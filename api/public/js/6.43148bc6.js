(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"7b46":function(t,e,a){"use strict";a("7cd0")},"7cd0":function(t,e,a){},f31f:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("fake-user-posts-info"),a("div",{staticClass:"admin-posts"},[a("data-table",{ref:"datatable",attrs:{columns:t.columns,url:"admin/posts",rowKey:"id",title:t.title,"use-body":""},scopedSlots:t._u([{key:"table",fn:function(e){return[a("q-tr",[a("q-td",[a("q-item",{attrs:{to:{name:"admin.posts.preview",params:{id:e.props.row.id}},target:"_blank"}},[a("q-item-section",[a("icon-with-tooltip",{attrs:{tooltip:t.$t("preview"),color:"positive",size:"sm",icon:"pageview"}})],1)],1),a("q-item",[a("q-item-section",[a("icon-with-tooltip",{attrs:{tooltip:t.$t("delete"),color:e.props.row.id===t.postIdDeleteConfirmation?"negative":"positive",size:"sm",icon:"delete"},on:{click:function(a){return t.deletePost(e.props.row.id)}}})],1)],1)],1),a("q-td",[t._v("\n            "+t._s(e.props.row.id)+"\n          ")]),a("q-td",[t._v("\n            "+t._s(e.props.row.title)+"\n          ")]),a("q-td",{on:{click:function(a){return t.setPrevData(e.props.row)}}},[t._v("\n            "+t._s(e.props.row.status)+"\n            "),a("q-popup-edit",{attrs:{buttons:""},on:{save:function(a){return t.updatePost(e.props.row,"status")}},model:{value:e.props.row.status,callback:function(a){t.$set(e.props.row,"status",a)},expression:"props.props.row.status"}},[a("status",{attrs:{item:e.props.row,statuses:t.statuses},on:{update:t.updateTableItem}})],1)],1),a("q-td",[t._v("\n            "+t._s(e.props.row.views)+"\n          ")]),a("q-td",[t._v("\n            "+t._s(e.props.row.comments)+"\n          ")]),a("q-td",[t._v("\n            "+t._s(t.moment(e.props.row.created_at).format("YYYY-MM-DD"))+"\n          ")])],1)]}}])})],1)],1)},o=[],n=a("30b7"),l=a("ad45"),i=a("2ef0"),r=a.n(i),d=a("77fc"),p=a("51d9"),u=a("c1df"),c=a.n(u),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n  Заплановано: "+t._s(t.totalPosts)+" (на "+t._s(4*t.totalPosts)+" годин)\n")])},f=[],b={name:"FakeUserPostsInfo",data(){return{api:new d["a"],totalPosts:0,expanded:!1}},created(){this.fetchFakeUsersPostsAmount()},methods:{fetchFakeUsersPostsAmount(){this.api.get("/admin/posts/fake-users-posts",null,null,!0).then((t=>{this.totalPosts=t.data}))}}},v=b,w=a("2877"),h=Object(w["a"])(v,m,f,!1,null,null,null),_=h.exports;const q=[{name:"",required:!0,label:"",align:"left",sortable:!0},{name:"id",required:!0,label:"#",align:"left",sortable:!0},{name:"title",required:!0,label:"Title",align:"left",sortable:!0},{name:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"views",required:!0,label:"Views",align:"left",sortable:!0},{name:"comments",required:!0,label:"Comments",align:"left",sortable:!0},{name:"created_at",required:!0,label:"Created at",align:"left",sortable:!0}];var g={name:"Index",components:{FakeUserPostsInfo:_,IconWithTooltip:p["a"],DataTable:n["a"],Status:l["a"]},data(){return{columns:q,api:new d["a"],prevData:{},updateUrl:"admin/posts",title:"Posts",moment:c.a,statuses:[{label:"Draft",value:"draft"},{label:"Pending",value:"pending"},{label:"Reviewing",value:"reviewing"},{label:"Approved",value:"approved"},{label:"Declined",value:"declined"},{label:"Editing",value:"editing"}],postIdDeleteConfirmation:null}},methods:{deletePost(t){this.postIdDeleteConfirmation===t?this.api.post(`admin/posts/${t}/delete`,null,null,null,!0).then((e=>{this.deleteTableItem(t)})):this.postIdDeleteConfirmation=t},setPrevData(t){this.prevData=r.a.cloneDeep(t)},deleteTableItem(t){const e=r.a.cloneDeep(this.$refs.datatable.data),a=r.a.findIndex(e,{id:t});e.splice(a,1),console.log("tableData",e),this.$refs.datatable.data=e},updateTableItem(t){const e=r.a.cloneDeep(this.$refs.datatable.data),a=r.a.findIndex(e,{id:t.id});e.splice(a,1,t),this.$refs.datatable.data=e},updatePost(t,e){const a={};a[e]=t[e];const s=`admin/posts/${t.id}`;this.api.post(s,a,null,null,!0).then((()=>{this.$q.notify({message:"Ok",color:"positive"})})).catch((()=>{this.updateTableItem(this.prevData),this.$q.notify({message:"Fail",color:"negative"})}))}}},D=g,I=(a("7b46"),a("bd08")),P=a("db86"),k=a("66e5"),$=a("4074"),T=a("42a1"),x=a("eebe"),C=a.n(x),y=Object(w["a"])(D,s,o,!1,null,null,null);e["default"]=y.exports;C()(y,"components",{QTr:I["a"],QTd:P["a"],QItem:k["a"],QItemSection:$["a"],QPopupEdit:T["a"]})}}]);